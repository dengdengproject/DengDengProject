<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="matchSql">

	<!-- 매치 리스트 가져오기--> <!-- 현재 실패 -->
	<select id="matchList" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT *
			FROM
				MATCH_REGISTER
		]]>
	</select>

	<!-- 매치 등록 폼 이동 버튼 --> <!-- 사실 이 쿼리는 그냥 각각의 테이블을 호출하는 쿼리문을 사용했어도 됐다. -->
	<!-- <select id="matchInsertForm" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
				PSMEM_ID, NAME, PHONE, EMAIL, SEX, BIRTHDAY, ZIPCODE, ADDRESS1, ADDRESS2,
				ADDRESS_ADD, USE_TIME, JOIN_DATE, DIVISION, JOB, LI_CHK, LI_NAME,
				LI_FILE, LI_FILE_SIZE, SCHOOL, ADD_ZIP, ADD_ADD1, ADD_ADD2, ADD_ADD_ADD,
				CAREER, INTRODUCE, GRADE, PET_MEM_ID, PET_NAME, PET_SEX, PET_KIND, PET_SIZE,
				PET_AGE, PET_SEX_CHK, PROFILE_FILE
			FROM
				(
				SELECT 
					PETSITTER.PSMEM_ID AS PSMEM_ID, PETSITTER.NAME AS NAME, PETSITTER.PHONE AS PHONE,
					PETSITTER.EMAIL AS EMAIL, PETSITTER.SEX AS SEX, PETSITTER.BIRTHDAY AS BIRTHDAY, PETSITTER.ZIPCODE AS ZIPCODE,
					PETSITTER.ADDRESS1 AS ADDRESS1, PETSITTER.ADDRESS2 AS ADDRESS2, PETSITTER.ADDRESS_ADD AS ADDRESS_ADD, PETSITTER.USE_TIME AS USE_TIME,
					PETSITTER.JOIN_DATE AS JOIN_DATE, PETSITTER.MEMBER_DIVISION AS DIVISION, PETSITTER_ADD.PSMEM_JOB AS JOB,
					PETSITTER_ADD.PSMEM_LICENSE_CHECK AS LI_CHK, PETSITTER_ADD.PSMEM_LICENSE_NAME AS LI_NAME,
					PETSITTER_ADD.PSMEM_LICENSE_FILE AS LI_FILE, PETSITTER_ADD.PSMEM_LICENSE_FILE_SIZE AS LI_FILE_SIZE,
					PETSITTER_ADD.PSMEM_SCHOOL_FINISH_CHECK AS SCHOOL, PETSITTER_ADD.PSMEM_CONSIGNMENT_ZIPCODE AS ADD_ZIP,
					PETSITTER_ADD.PSMEM_CONSIGNMENT_ADDRESS1 AS ADD_ADD1, PETSITTER_ADD.PSMEM_CONSIGNMENT_ADDRESS2 AS ADD_ADD2,
					PETSITTER_ADD.PSMEM_CONSIGNMENT_ADDRESS_ADD AS ADD_ADD_ADD, PETSITTER_ADD.PSMEM_CAREER AS CAREER,
					PETSITTER_ADD.PSMEM_INTRODUCE AS INTRODUCE, PETSITTER_ADD.PSMEM_CLASS AS GRADE,
					PET_MEMBER.PET_MEM_ID AS PET_MEM_ID, PET_MEMBER.PET_MEM_NAME AS PET_NAME, PET_MEMBER.PET_MEM_SEX AS PET_SEX,
					PET_MEMBER.PET_MEM_KIND AS PET_KIND, PET_MEMBER.PET_MEM_SIZE AS PET_SIZE, PET_MEMBER.PET_MEM_AGE AS PET_AGE,
					PET_MEMBER.PET_MEM_SEX_CHECK AS PET_SEX_CHK, PROFILE_FILE.PROFILE_STORED_FILE_NAME AS PROFILE_FILE
					FROM PETSITTER, PETSITTER_ADD, PET_MEMBER, PROFILE_FILE
				WHERE PETSITTER.PSMEM_ID = PETSITTER_ADD.PSMEM_ID AND PETSITTER.PSMEM_ID = PET_MEMBER.ID AND PET_MEMBER.ID = PROFILE_FILE.PSMEM_ID
				)
			WHERE PSMEM_ID = #{ID}
		]]>
	</select> -->
	
	<!-- 여기부터 매치 관련 테이블 가져오는 각각의 쿼리 -->
	<!-- 펫시터 정보 일괄 가져오기 --> <!-- 한 줄 -->
	<select id="selectPetsitter" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
				*
			FROM
				PETSITTER
			WHERE PSMEM_ID = #{ID}
		]]>
	</select>
	
	<!-- 펫시터 추가 정보 일괄 가져오기 --> <!-- 한 줄 -->
	<select id="selectPetsitterAdd" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
				*
			FROM
				PETSITTER_ADD
			WHERE PSMEM_ID = #{ID}
		]]>
	</select>
	
	<!-- 펫시터 프로필 사진 가져오기 한줄 -->
	<select id="selectPetsitterProfile" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
				*
			FROM
				PROFILE_FILE
			WHERE PSMEM_ID = #{ID}
		]]>
	</select>
	
	<!-- 위탁 장소 이미지 가져오기 --> <!-- 리스트 -->
	<select id="selectPetsitterAddImg" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
				*
			FROM
				PETSITTER_ADD_IMG
			WHERE PSMEM_ID = #{ID}
		]]>
	</select>
	
	<!-- 펫 정보 일괄 가져오기  펫 + 추가 + 프로필 --> <!-- 리스트 -->
	<select id="selectPet" 	parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
				ID, NAME, SEX, KIND, PET_SIZE, KG, DATA_NUM, AGE, SEX_CHK, CASE,
				PET_ZIP, PET_ADD1, PET_ADD2, PET_ADD_ADD, PET_PHN, FEATURE,
				RESPONSE, HUMAN, BARK, TRAINING, DDONG, TOUCH, ATTACK,
				VACCINATION, ORI_FILE_NAME, STO_FILE_NAME
			FROM
				(
				SELECT 
					PET_MEMBER.ID AS ID,
					PET_MEMBER.PET_MEM_NAME AS NAME,
					PET_MEMBER.PET_MEM_SEX AS SEX,
					PET_MEMBER.PET_MEM_KIND AS KIND,
					PET_MEMBER.PET_MEM_SIZE AS PET_SIZE,
					PET_MEMBER.PET_MEM_WEIGHT AS KG,
					PET_MEMBER.PET_NO AS DATA_NUM,
					PET_MEMBER.PET_MEM_AGE AS AGE,
					PET_MEMBER.PET_MEM_SEX_CHECK AS SEX_CHK,
					PET_MEMBER.PET_MEM_CASE AS CASE,
					PET_MEMBER.PET_MEM_ZIPCODE AS PET_ZIP,
					PET_MEMBER.PET_MEM_ADDRESS1 AS PET_ADD1,
					PET_MEMBER.PET_MEM_ADDRESS2 AS PET_ADD2,
					PET_MEMBER.PET_MEM_ADDRESS_ADD AS PET_ADD_ADD,
					PET_MEMBER.PET_MEM_PHONE AS PET_PHN,
					PET_MEMBER.PET_MEM_FEATURE AS FEATURE,
					PET_MEMBER_ADD.PET_MEMBER_ADD_RESPONSE AS RESPONSE,
					PET_MEMBER_ADD.PET_MEMBER_ADD_HUMAN AS HUMAN,
					PET_MEMBER_ADD.PET_MEMBER_ADD_BARK AS BARK,
					PET_MEMBER_ADD.PET_MEMBER_ADD_TRAINING AS TRAINING,
					PET_MEMBER_ADD.PET_MEMBER_ADD_DDONG_STYLE AS DDONG,
					PET_MEMBER_ADD.PET_MEMBER_ADD_SHARP_BODY AS TOUCH,
					PET_MEMBER_ADD.PET_MEMBER_ADD_ATTACK AS ATTACK,
					PET_MEMBER_ADD.PET_MEMBER_ADD_VACCINATION AS VACCINATION,
					PROFILE_FILE.PROFILE_ORIGINAL_FILE_NAME AS ORI_FILE_NAME,
					PROFILE_FILE.PROFILE_STORED_FILE_NAME AS STO_FILE_NAME
				FROM PET_MEMBER, PET_MEMBER_ADD, PROFILE_FILE
				WHERE PET_MEMBER.PET_MEM_ID = PET_MEMBER_ADD.PET_MEM_ID AND PET_MEMBER.PET_MEM_ID = PROFILE_FILE.PET_MEM_ID
				)
			WHERE ID = #{ID}
		]]>
	</select>
	
	<!-- 아래는 사용 안함 -->
	<!-- 펫 추가 정보 일괄 가져오기  리스트
	<select id="selectPetAdd" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
				*
			FROM
				PET_MEMBER_ADD
			WHERE ID = #{ID}
		]]>
	</select> -->
	
	<!-- 매치 관련 정보 가져오기 끝 -->
	
	
	<!-- 매치 등록하기 --> <!-- 만들어야 함. 리스트를 저장하는 방식. mybatis or list -->
	<select id="matchInsert" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			INSERT INTO MATCH_REGISTER (
				MATCH_NO,
				PSMEM_ID,
				PSMEM_NAME,
				PSMEM_ADDRESS1,
				PSMEM_CLASS,
				MATCH_PLACE_IMAGE,
				MATCH_SUBJECT,
				MATCH_DATE,
				MATCH_CHECK_IN,
				MATCH_CHECK_OUT,
				POSSIBLE_SERVICE,
				PRICE_SMALL_ALL,
				PRICE_SMALL_HALF,
				PRICE_MEDIUM_ALL,
				PRICE_MEDIUM_HALF,
				PRICE_LARGE_ALL,
				PRICE_LARGE_HALF,
				MATCH_REGISTER_DATE
			)
			VALUES (
				MATCH_REGISTER_SEQ.NEXTVAL,
				#{PSMEM_ID},
				#{name},
				#{address1},
				#{GRADE},
				null,
				#{SUBJECT},
				#{basicDate},
				#{checkInTime},
				#{checkOutTime},
				#{serviceArr},
				#{smallAll},
				#{smallHalf},
				#{mediumAll},
				#{mediumHalf},
				#{largeAll},
				#{largeHalf},
				SYSDATE
			)
		]]>
	</select>
	
</mapper>