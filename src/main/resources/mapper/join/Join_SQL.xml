<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="join">

<!-- ID 중복 체크 --> <!-- 일반 회원, 펫시터 TABLE 모두 확인 -->
<select id="selectIdCheck" parameterType="hashmap" resultType="hashmap">
	<![CDATA[
		SELECT
			ID
		FROM
			(
			SELECT
				MEM_ID AS ID
			FROM
				MEMBER
    
			UNION all

			SELECT
				PSMEM_ID AS ID
			FROM
				PETSITTER
			)
		WHERE
			ID = #{ID}
	]]>
</select>	 

<!-- 일반 회원 가입 -->
<insert id="insertMember" parameterType="hashmap">
	<![CDATA[
		INSERT INTO MEMBER (
			MEM_NO,
			MEM_ID,
			PASSWORD1,
			PASSWORD2,
			NAME,
			PHONE,
			EMAIL,
			SEX,
			BIRTHDAY,
			ZIPCODE,
			ADDRESS1,
			ADDRESS2,
			ADDRESS_ADD,
			JOIN_DATE
		)
		VALUES (
			MEMBER_SEQ.NEXTVAL,
			#{MEM_ID},
			#{PASSWORD1},
			#{PASSWORD2},
			#{NAME},
			#{PHONE},
			#{EMAIL},
			#{SEX},
			#{BIRTHDAY},
			#{ZIPCODE},
			#{ADDRESS1},
			#{ADDRESS2},
			#{ADDRESS_ADD},
			SYSDATE
		)
	]]>
</insert>

<!-- 멤버 프로필 파일 업로드 -->
<insert id="insertMemFile" parameterType="hashmap">
	<![CDATA[
		INSERT INTO PROFILE_FILE
			(
			PROFILE_NO,
			MEM_ID,
			PROFILE_ORIGINAL_FILE_NAME,
			PROFILE_STORED_FILE_NAME,
			PROFILE_FILE_SIZE
		)
		VALUES
			(
			PROFILE_FILE_SEQ.NEXTVAL,
			#{MEM_ID},
			#{PROFILE_ORIGINAL_FILE_NAME},
			#{PROFILE_STORED_FILE_NAME},
			#{PROFILE_FILE_SIZE}
		)
	]]>
</insert>
	





</mapper>