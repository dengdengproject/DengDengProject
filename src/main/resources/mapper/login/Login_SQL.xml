<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="login">

	<!-- 로그인 --> <!-- 일반 회원, 펫시터 TABLE 모두 확인 -->
	<select id="selectId" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
				ID, PASSWORD1, MEM_TYPE
			FROM
				(
				SELECT
					MEM_ID AS ID, PASSWORD1, MEMBER_DIVISION AS MEM_TYPE
				FROM
					MEMBER
   	 
				UNION all		

				SELECT
					PSMEM_ID AS ID, PASSWORD1, MEMBER_DIVISION AS MEM_TYPE
				FROM
					PETSITTER
				)
			WHERE
				ID = #{ID} AND PASSWORD1 = #{PASSWORD1}
		]]>
	</select>

	<!-- 아이디 찾기 --> <!-- 일반 회원, 펫시터 TABLE 모두 확인 -->
	<select id="" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
				ID, NAME, PHONE
			FROM
				(
				SELECT
					MEM_ID AS ID, NAME, PHONE
				FROM
					MEMBER
   	 
				UNION all	

				SELECT
					PSMEM_ID AS ID, NAME, PHONE
				FROM
					PETSITTER
				)
			WHERE
				NAME = #{NAME} AND PHONE = #{PHONE}
		]]>
	</select>

	<!-- PW 찾기 --> <!-- 일반 회원, 펫시터 TABLE 모두 확인 -->
	<select id="" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
				PASSWORD1, ID, BIRTHDAY, PHONE
			FROM
				(
				SELECT
					PASSWORD1, MEM_ID AS ID, BIRTHDAY, PHONE
				FROM
					MEMBER
   	 
				UNION all	

				SELECT
					PASSWORD1, PSMEM_ID AS ID, BIRTHDAY, PHONE
				FROM
					PETSITTER
				)
			WHERE
				ID = #{ID} AND BIRTHDAY = #{BIRTHDAY} AND PHONE = #{PHONE}
		]]>
	</select>

	<!-- ID 중복 체크 --> <!-- 일반 회원, 펫시터 TABLE 모두 확인 -->
	<select id="" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
				ID
			FROM
				(
				SELECT
					MEM_ID AS ID
				FROM
					MEMBER
   	 
				UNION all

				SELECT	
					PSMEM_ID AS ID
				FROM
					PETSITTER
				)
			WHERE
				ID = #{ID}
		]]>
	</select>
	
</mapper>